function addBootstrapGridTemplates(n){n.put("appendPagingTemplate.html",'<div class="col-xs-12" style="text-align: center">    <span data-ng-show="grid.loading">Loading...<\/span>    <a class="cmdLoadMore" data-ng-hide="grid.loading" data-ng-click="grid.nextPage()" style="cursor: pointer">Load more<\/a><\/div>'),n.put("bootstrapGrid.html",'<div class="row">    <div class="col-xs-4 col-sm-8">        <span data-ng-include="grid.options.topButtonsTemplate"><\/span>        <span data-ng-show="grid.loading">Loading...<\/span>    <\/div>    <div class="col-xs-8 col-sm-4">        <div class="input-group">            <input type="text" class="form-control" placeholder="Search" data-ng-model="grid.filterOptions.filterText" />            <span class="input-group-btn" data-ng-click="grid.load()">                <button class="btn btn-default">                    <span class="glyphicon glyphicon-search"><\/span>                <\/button>            <\/span>        <\/div>    <\/div><\/div><table class="table table-hover">    <thead>        <tr>            <th style="width: 50px;"><\/th>            <th class="pointer" data-ng-repeat="col in grid.columnDefs" data-ng-click="grid.toggleSort(col.field)">{{col.displayName}}                 <span class="glyphicon" data-ng-class="{\'glyphicon-chevron-up\':grid.sort[col.field] == \'\', \'glyphicon-chevron-down\':grid.sort[col.field] == \'desc\'}"><\/span>            <\/th>        <\/tr>    <\/thead>    <tbody>        <tr data-ng-repeat="item in grid.items">            <td data-ng-include="grid.options.rowButtonsTemplate"><\/td>            <td class="pointer" data-ng-repeat="col in grid.columnDefs" data-ng-click="grid.rowClick(item)">{{filterOrDefault(col,item)}}<\/td>        <\/tr>    <\/tbody><\/table><div class="row" data-ng-include="grid.options.pagingTemplate"><\/div>'),n.put("defaultPagingTemplate.html",'<div class="col-xs-2">    <select class="form-control" data-ng-options="size for size in grid.pagingOptions.pageSizes" data-ng-model="grid.pagingOptions.pageSize"><\/select><\/div><div class="col-xs-10">    <ul class="pagination" style="margin: 0;">        <li><a class="pointer" data-ng-click="grid.firstPage()">&lt;&lt;<\/a><\/li>        <li><a class="pointer" data-ng-click="grid.previousPage()">&lt;<\/a><\/li>        <li data-ng-repeat="page in grid.pagingOptions.pagerPages" data-ng-class="{active:page==grid.pagingOptions.currentPage}">            <a class="pointer" data-ng-click="grid.goToPage(page)">{{page}}<\/a>        <\/li>        <li><a class="pointer" data-ng-click="grid.nextPage()">&gt;<\/a><\/li>        <li><a class="pointer" data-ng-click="grid.lastPage()">&gt;&gt;<\/a><\/li>    <\/ul><\/div>'),n.put("rowButtonsTemplate.html",' <span class="glyphicon glyphicon-remove pointer"        data-ng-show="grid.options.allowDelete"        data-ng-click="grid.confirmDelete(\'This cannot be undone.  Are you sure?\',item)"><\/span>')}function isScrolledIntoView(n){var i=$(window).scrollTop(),r=i+$(window).height(),t=$(n).offset().top,u=t+$(n).height();return(console.log({docViewTop:i,docViewBottom:r,elemTop:t,elemBottom:u}),t==0)?!1:t>=i&&t<=r}function SimpleApiListSource(n,t,i){var r=this;this.options={allowPaging:i.allowPaging||!1,pagingMode:i.pagingMode||"default",allowSorting:i.allowSorting||!1,allowSearching:i.allowSearching||!1,allowDelete:i.allowDelete||!1,enableMetadataLookup:i.enableMetadataLookup||!1,topButtonsTemplate:i.topButtonsTemplate||"",rowButtonsTemplate:i.rowButtonsTemplate||"rowButtonsTemplate.html",pagingTemplate:i.pagingMode=="append"?"appendPagingTemplate.html":"defaultPagingTemplate.html"},this.columnDefs=i.columnDefs,this.rowClick=i.rowClick||function(){},this.newItem={},this.items=[],this.pagingOptions={pageSizes:[10,50,100],pageSize:i.itemsPerPage||10,currentPage:1,pageCount:-1,pagerPages:[1]},this.itemCount=0,this.sort=i.sort||{},this.lastQuery="",this.filterOptions={filterText:"",useExternalFilter:!0},this.loading=!1,this.metaData=[],this.forNgGrid=function(n,t){return r.data=t+".items",r.totalServerItems=t+".itemCount",r.showFooter=!0,r.enablePaging=!0,n.$watch(t+".pagingOptions",function(n,t){n!==t&&(n.currentPage!==t.currentPage||n.pageSize!==t.pageSize)&&r.loadIn(100)},!0),n.$watch(t+".filterOptions.filterText",function(n,t){n!==t&&(r.pagingOptions.currentPage=1,r.loadIn(300))},!0),r},this.applyMetadata=function(){for(var t,u,n,i=0;i<r.metaData.length;i++)for(t=r.metaData[i],u=0;u<r.columnDefs.length;u++)n=r.columnDefs[u],n.field==t.Name&&(n.metaData=t,n.dataType==null&&(n.dataType=t.TypeUsageName.toLowerCase()),n.displayName==null&&t.DisplayName!=null&&(n.displayName=t.DisplayName),n.displayName==null&&(n.displayName=n.field),n.cellFilter==null&&n.dataType=="double"&&(n.cellFilter="number:2"),n.cellFilter==null&&n.dataType=="datetime"&&(n.cellFilter="date:shortDate"))},this.loadMetadata=function(){return t.get(n+"/meta").success(function(n){r.metaData=n,r.applyMetadata()})},this.loadTimer=null,this.loadIn=function(n,t){r.loading=!0,window.clearTimeout(this.loadTimer),r.loadTimer=window.setTimeout(function(){r.load(t)},n)},this.TryParseInt=function(n,t){var i=t;return n!=null&&n.length>0&&(n=n.replace(",",""),isNaN(n)||(i=parseInt(n))),i},this.TryParseFloat=function(n,t){var i=t;return n!=null&&n.length>0&&(n=n.replace(",",""),isNaN(n)||(i=parseFloat(n))),i},this.TryParseDate=function(n,t){var r=t,i;return n!=null&&n.length>0&&(i=Date.parse(n),isNaN(i)||(r=new Date(i))),r},this.getTypedFilter=function(n){return n==null||n==""?{}:{asDate:r.TryParseDate(n),asInt:r.TryParseInt(n),asFloat:r.TryParseFloat(n),asText:n}},this.getSearchODataFilter=i.getSearchODataFilter||function(n){for(var i=r.getTypedFilter(n),u=[],t,f=0;f<r.columnDefs.length;f++){if(t=r.columnDefs[f],i.asDate&&t.dataType=="datetime"){var e=(new Date).getTimezoneOffset()*6e4,o=new Date(Date.parse(n+" 0:00")+e),s=new Date(Date.parse(n+" 23:00")+e);u.push(t.field+" gt datetime'"+o.toISOString()+"' and "+t.field+" lt datetime'"+s.toISOString()+"'")}i.asFloat&&t.dataType=="double"&&u.push("floor("+t.field+") eq floor("+i.asFloat.toFixed(2)+") or ceiling("+t.field+") eq ceiling("+i.asFloat.toFixed(2)+")"),i.asFloat&&t.dataType=="int32"&&u.push(t.field+" eq "+i.asFloat.toFixed(0)),i.asText&&t.dataType=="string"&&u.push("substringof('"+i.asText+"',"+t.field+") eq true")}return u.join(" or ")},this.toggleSort=function(n){var t=r.sort[n];t==null?r.sort[n]="":t==""?r.sort[n]="desc":t=="desc"&&delete r.sort[n],r.load()},this.getSortOData=function(){var t=[],n;for(n in this.sort)t.push(n+" "+this.sort[n]);return t.join(",")},this.loadNewItem=function(){t.get(n+"/new").success(function(n){r.newItem=n})},this.addMany=function(i){return t.post(n+"/many",i).success(function(){r.load()})},this.add=function(i){var u=i||r.newItem;return t.post(n,u).success(function(){i==null&&r.loadNewItem(),r.load()})},this.update=function(i){return t.put(n,i).success(function(){})},this.delete=function(i){t.delete(n,{data:i}).success(function(){var n=r.items.indexOf(i);n!=-1&&r.items.splice(n,1)})},this.confirmDelete=function(n,t){confirm(n)&&r.delete(t)},this.goToPage=function(n){r.pagingOptions.currentPage=n},this.firstPage=function(){r.pagingOptions.currentPage=1},this.nextPage=function(){r.pagingOptions.currentPage<r.pagingOptions.pageCount&&(r.pagingOptions.currentPage=r.pagingOptions.currentPage+1)},this.previousPage=function(){r.pagingOptions.currentPage>1&&(r.pagingOptions.currentPage=r.pagingOptions.currentPage-1)},this.lastPage=function(){r.pagingOptions.currentPage=r.pagingOptions.pageCount},this.getPageInterval=function(n,t,i){var r=t/2;return{start:Math.ceil(n>r?Math.max(Math.min(n-r,i-t),1):1),end:Math.ceil(n>r?Math.min(n+r-1,i):Math.min(t,i))}},this.load=function(u){var f,e,o,s,c,h;return r.loading=!0,f=[],i.allowPaging&&(f.push("$inlinecount=allpages"),f.push("$skip="+(r.pagingOptions.currentPage-1)*r.pagingOptions.pageSize),f.push("$top="+r.pagingOptions.pageSize)),i.allowSorting&&(e=r.getSortOData(),e!=null&&e!=""&&f.push("$orderby="+e)),o=[],i.allowSearching&&(s=r.getSearchODataFilter(r.filterOptions.filterText),s!=null&&s!=""&&o.push("("+s+")")),o.length>0&&(c="$filter="+o.join(" and "),f.push(c)),h=n+"/?"+f.join("&"),r.lastQuery=h,t.get(h).then(function(n){var i=n.data,e,f,t;if(u==!0)for(t=0;t<i.Results.length;t++)e=i.Results[t],r.items.push(e);else r.items=i.Results;if(r.itemCount=i.Count,r.options.allowPaging)for(r.pagingOptions.pageCount=Math.ceil(r.itemCount/r.pagingOptions.pageSize),r.pagingOptions.pagerPages=[],f=r.getPageInterval(r.pagingOptions.currentPage,10,r.pagingOptions.pageCount),t=f.start;t<=f.end;t++)r.pagingOptions.pagerPages.push(t);r.loading=!1},function(){r.loading=!1})},this.init=function(){t.defaults.headers.delete={"Content-Type":"application/json"},t.defaults.headers.get={"Content-Type":"application/json"},r.options.enableMetadataLookup?r.loadMetadata().then(r.load):r.load(),r.loadNewItem()},this.init()}function SimpleApiFormSource(n,t,i){var r=this;this.modelState={},this.item={},this.loading=!1,this.saving=!1,this.isNew=!1,this.load=function(){i!=null?(r.getById(),r.save=r.update,r.isNew=!1):(r.getNew(),r.save=r.add,r.isNew=!0)},this.getById=function(){return r.loading=!0,t.get(n+"/"+i).success(function(n){r.item=n,r.loading=!1}).error(function(){r.loading=!1})},this.getNew=function(){t.get(n+"/new").success(function(n){r.item=n})},this.update=function(){return r.saving=!0,t.put(n,r.item).success(function(n){r.modelState={},r.item=n,r.saving=!1,r.onSave&&r.onSave()}).error(function(n){r.modelState=n.ModelState,r.saving=!1})},this.add=function(){return r.saving=!0,t.post(n,r.item).success(function(n){r.modelState={},r.item=n,r.saving=!1,r.onSave&&r.onSave()}).error(function(n){r.modelState=n.ModelState,r.saving=!1})},this.load()}angular.module("serverValidate",[]).directive("serverValidate",[function(){return console.log("serverValidate: wiring up"),{require:"ngModel",link:function(n,t,i,r){var f;console.log("serverValidate: link"),console.log(n),console.log(t),console.log(i),console.log(r);var o=i.serverValidate,e=o==null?[]:o.split(","),u=e[0];u.length>0&&(u=u+"."),u=u+"modelState",f=e.length>1?e[1]:i.ngModel.replace(i.serverValidate+".",""),f=f.replace("$index",n.$index),console.log("Will watch "+u+" for "+f),n.$watch(u,function(){console.log("serverValidate: modelState changed");var t=n.$eval(u);(console.log("serverValidate: setting error for "+f),t!=null)&&(t[f]?(r.$setValidity("server",!1),r.$error.server=t[f]):(r.$setValidity("server",!0),r.$error.server=[]))}),n.$watch(i.ngModel,function(n,t){n!=t&&(r.$setValidity("server",!0),r.$error.server=[])})}}}]);var bootstrapGrid=angular.module("bootstrapGrid",[]).directive("bootstrapGrid",["$filter","$templateCache",function(n,t){return addBootstrapGridTemplates(t),{scope:!0,templateUrl:"bootstrapGrid.html",compile:function(){return{pre:function(t,i,r){t.filterOrDefault=function(t,i){var u=i[t.field];if(t.cellFilter==null||t.cellFilter=="")return u;var r=t.cellFilter.split(":"),f=r[0],e=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return n(f)(u,e,o)},t.grid=t.$parent[r.bootstrapGrid],t.$watch("grid.pagingOptions",function(n,i){n!==i&&(n.currentPage!==i.currentPage||n.pageSize!==i.pageSize)&&t.grid.loadIn(100,t.grid.options.pagingMode=="append")},!0),t.$watch("grid.filterOptions.filterText",function(n,i){n!==i&&(t.grid.pagingOptions.currentPage=1,t.grid.loadIn(300))},!0),t.$watch("grid.loading",function(){})}}}}}]);
//@ sourceMappingURL=SimpleEntityApi-0.1.min.js.map